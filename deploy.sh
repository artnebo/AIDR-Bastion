#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –Ω–∞ GitHub Pages
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: ./deploy.sh

set -e

echo "üöÄ –ü–æ—á–∞—Ç–æ–∫ –¥–µ–ø–ª–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó AIDR-Bastion..."

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –º–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
if [ ! -f "package.json" ]; then
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –∑ –ø–∞–ø–∫–∏ docs-site"
    exit 1
fi

# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
echo "üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π..."
npm ci

# –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—é –∑–±—ñ—Ä–∫—É
echo "üßπ –û—á–∏—â–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –∑–±—ñ—Ä–∫–∏..."
npm run clear

# –ó–±–∏—Ä–∞—î–º–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
echo "üî® –ó–±—ñ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó..."
npm run build

# –î–µ–ø–ª–æ—é—î–º–æ –Ω–∞ GitHub Pages
echo "üöÄ –î–µ–ø–ª–æ–π –Ω–∞ GitHub Pages..."
npm run deploy

echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!"
echo "üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–æ—é: https://artnebo.github.io/AIDR-Bastion/"
