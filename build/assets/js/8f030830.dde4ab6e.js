"use strict";(self.webpackChunkaidr_bastion_docs=self.webpackChunkaidr_bastion_docs||[]).push([[423],{7659:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=t(4848),s=t(8453);const r={},a="Development",o={id:"development",title:"Development",description:"Setting up OpenSearch",source:"@site/docs/development.md",sourceDirName:".",slug:"/development",permalink:"/AIDR-Bastion/docs/development",draft:!1,unlisted:!1,editUrl:"https://github.com/0xAIDR/AIDR-Bastion/tree/main/docs/docs/development.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Adding Custom Pipelines",permalink:"/AIDR-Bastion/docs/adding-custom-pipelines"},next:{title:"License",permalink:"/AIDR-Bastion/docs/license"}},l={},c=[{value:"Setting up OpenSearch",id:"setting-up-opensearch",level:2},{value:"Setting up Kafka for Event Logging",id:"setting-up-kafka-for-event-logging",level:2},{value:"Quick Start with Docker Compose",id:"quick-start-with-docker-compose",level:3},{value:"Event Logging Features",id:"event-logging-features",level:3},{value:"Event Schema",id:"event-schema",level:3},{value:"Advanced Kafka Configuration",id:"advanced-kafka-configuration",level:3},{value:"Rule Management",id:"rule-management",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"development",children:"Development"}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-opensearch",children:"Setting up OpenSearch"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Install OpenSearch"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker run -p 9200:9200 -p 9600:9600 -e "discovery.type=single-node" opensearchproject/opensearch:latest\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Create similarity index"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python app/pipelines/similarity_pipeline/index_script.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This will create the ",(0,i.jsx)(n.code,{children:"similarity-prompt-index"})," index in OpenSearch. You can customize the index name by setting the SIMILARITY_PROMPT_INDEX environment variable."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-kafka-for-event-logging",children:"Setting up Kafka for Event Logging"}),"\n",(0,i.jsx)(n.p,{children:"AIDR Bastion supports Kafka integration for logging BLOCK and NOTIFY events, enabling scalable event streaming and real-time monitoring."}),"\n",(0,i.jsx)(n.h3,{id:"quick-start-with-docker-compose",children:"Quick Start with Docker Compose"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configure environment variables"}),"\nMinimal required environments"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Add to your .env file\nKAFKA__BOOTSTRAP_SERVERS=localhost:9092\nKAFKA__TOPIC=aidr-events\nKAFKA__SECURITY_PROTOCOL=PLAINTEXT\n"})}),"\n",(0,i.jsx)(n.p,{children:"Full Kafka environment variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"## Kafka configuration\n# KAFKA__BOOTSTRAP_SERVERS=\n# KAFKA__TOPIC=\n# KAFKA__SECURITY_PROTOCOL=PLAINTEXT\n# KAFKA__SASL_MECHANISM=\n# KAFKA__SASL_USERNAME=\n# KAFKA__SASL_PASSWORD=\n# KAFKA__SAVE_PROMPT=true \n"})}),"\n",(0,i.jsxs)(n.p,{children:["The environment variable ",(0,i.jsx)(n.code,{children:"KAFKA__SAVE_PROMPT"})," is optional. It controls whether the input prompt data should be saved to Kafka or not."]}),"\n",(0,i.jsx)(n.h3,{id:"event-logging-features",children:"Event Logging Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"BLOCK Events"}),": Logged when prompts are blocked by detection rules"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"NOTIFY Events"}),": Logged when prompts trigger notifications but are allowed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Structured JSON"}),": Events include prompt content, detection results, and metadata"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time Streaming"}),": Events are sent immediately to Kafka topics"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"event-schema",children:"Event Schema"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n\t"status": "block",\n\t"pipelines": [\n\t\t{\n\t\t\t"status": "block",\n\t\t\t"name": "Pipeline Name",\n\t\t\t"triggered_rules": [\n\t\t\t\t{\n\t\t\t\t\t"details": "",\n\t\t\t\t\t"action": "block",\n\t\t\t\t\t"id": "a12d86d8-d96a-41fa-9e9a-18231539cfde",\n\t\t\t\t\t"name": "Instruction Overriding",\n\t\t\t\t\t"severity": null,\n\t\t\t\t\t"cwe_id": null\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t"service": "AIDR Bastion",\n\t"version": "1.0.0",\n\t"timestamp": "2025-09-24T14:39:50.351466",\n\t"task_id": 1 // unique identifier passed through endpoint run_pipeline\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"advanced-kafka-configuration",children:"Advanced Kafka Configuration"}),"\n",(0,i.jsx)(n.p,{children:"For production environments, configure additional security settings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# SASL Authentication\nKAFKA__SECURITY_PROTOCOL=SASL_SSL\nKAFKA__SASL_MECHANISM=PLAIN\nKAFKA__SASL_USERNAME=your_username\nKAFKA__SASL_PASSWORD=your_password\n\n# SSL Configuration (if required)\nKAFKA__SSL_CA_LOCATION=/path/to/ca-cert\nKAFKA__SSL_CERTIFICATE_LOCATION=/path/to/client-cert\nKAFKA__SSL_KEY_LOCATION=/path/to/client-key\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rule-management",children:"Rule Management"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"test_rules.py"}),": Comprehensive rule testing and validation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"generate_rules.py"}),": Interactive rule creation and conversion"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://github.com/UncoderIO/Roota",children:"Roota"})}),": Public-domain language for collective cyber defense"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://tdm.socprime.com/uncoder-ai/",children:"Uncoder AI"})}),": Convert Roota/Sigma rules to Semgrep format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://socprime.com/",children:"SOC Prime"})}),": Access comprehensive threat detection rules"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);